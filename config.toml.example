# Sorai Server Configuration
# Copy this file to config.toml and fill in your API keys

[sorai]
# Server host address (use 0.0.0.0 to bind to all interfaces, 127.0.0.1 for localhost only)
host = "0.0.0.0"
port = 8000
pool_size = 300
# Request timeout in seconds (default: 30)
timeout_request = 30

[logging]
# Show timestamp in logs (true/false)
show_timestamp = true
# Log level (default: info):
# - trace: Most verbose, all details including very low-level events
# - debug: Detailed debugging information
# - info: General informational messages (default) - NOW optimized for production!
# - warn: Warning messages for potentially harmful situations - RECOMMENDED for production
# - error: Error messages for critical issues
# - none: Disable logging entirely
level = "info"
# Log directory path (relative to working directory or absolute path)
log_directory = "/data/logs"
# Log rotation frequency: minutely, hourly, daily, never, none
# Use "none" to disable file logging completely (console logging is always enabled)
rotation = "hourly"
# Show module name in logs (true/false) - controls display of module paths like "sorai::http::server:"
show_module = false
# Analytics mode: "full" or "light"
# - full: Log all requests with structured fields using lazy evaluation
#         Achieves ~100-110K req/sec with info level, ~110-115K req/sec with warn level
#         Uses tracing::enabled! checks to defer allocations until actually needed
#         Best for: Analytics, monitoring, 50-100K req/s workloads
#
# - light: Only log errors and slow requests (>1s by default)
#         Achieves ~110-115K req/sec with info level, ~115-118K req/sec with warn level
#         Skips normal request logging entirely, only logs errors and slow requests
#         Best for: Ultra-high performance >100K req/s, production environments
analytics_mode = "full"
# Threshold in milliseconds for considering a request as "slow"
# Requests exceeding this threshold are ALWAYS logged regardless of analytics_mode
# Slow requests are logged with WARN level for visibility
# Recommended: 1000ms (1 second) for production, 500ms for development
slow_threshold_ms = 1000
# Performance tuning options (legacy, primarily for backward compatibility)
# Request sampling rate (0-100). Only log X% of requests. 100 = log all, 0 = log none
# NOTE: With optimized lazy evaluation, sampling is less critical
# For production: 10-30%, For development: 100%
request_sampling = 10
# Only log slow requests (true/false). When enabled, only requests exceeding slow_threshold_ms are logged
# NOTE: When analytics_mode is "light", this behavior is automatically applied
# Recommended: true for production, false for development
log_slow_requests_only = false

[cors]
# Enable or disable CORS (Cross-Origin Resource Sharing)
enabled = true
# Allowed origins - use ["*"] for any origin, or specify domains like ["http://localhost:3000", "https://example.com"]
allow_origins = ["*"]
# Allowed HTTP methods
allow_methods = ["GET", "POST", "PUT", "DELETE", "HEAD", "OPTIONS", "PATCH"]
# Allowed request headers
allow_headers = [
  "accept",
  "accept-language",
  "authorization",
  "content-type",
  "user-agent",
  "x-requested-id"
]
# Headers to expose to the browser
expose_headers = []
# Allow credentials (cookies, authorization headers, etc.)
allow_credentials = false
# Preflight request cache duration in seconds
max_age = 3600

[openai]
# OpenAI API Key - Get from https://platform.openai.com/api-keys
api_key = ""

[anthropic]
# Anthropic Claude API Key - Get from https://console.anthropic.com/
api_key = ""

[bedrock]
# AWS Bedrock credentials - Get from AWS IAM Console
api_key = ""
access_key = ""

[cohere]
# Cohere API Key - Get from https://dashboard.cohere.ai/api-keys
api_key = ""

[azure_openai]
# Azure OpenAI Service credentials - Get from Azure Portal
# Azure OpenAI endpoint URL format: https://your-resource-name.openai.azure.com/
api_key = ""
endpoint = ""

[vertext]
# Google Cloud Vertex AI configuration - Get from Google Cloud Console
# Path to your service account JSON key file (e.g., /path/to/service-account-key.json)
# Download from Google Cloud Console > IAM & Admin > Service Accounts
project_id = ""
credentials = ""
